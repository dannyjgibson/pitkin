<!doctype html>
<html>
    <head>
        <title>Pitkin Chat</title>
        <link rel="stylesheet" type="text/css" href="/styles/index.css" media="screen"/>
    </head>
    <body>
        <ul id="messages"></ul>
        <form action="">
            <input id="m" autocomplete="off" autofocus/><button>Send</button>
        </form>
        <script type="text/javascript" src=></script>
        <script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script><script>
            var socket = io();

            $('form').submit( emitMessage());

            $('#m').keypress(function (event) {
                if (event.which === 13) {
                    emitMessage();
                }
            });

            socket.on('chat message', function (msg){
                $('#messages').append($('<li>').text(msg));
            });

            function emitMessage() {
                socket.emit('chat message', $('#m').val());
                $('#m').val('');
                return false;
            }
        </script>
    </body>
</html>